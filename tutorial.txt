--------------- RAIZEN --------------------
---------- Ray Aditya Rahman --------------
----------- STP PUI-SKO ITS ---------------
--- Institut Teknologi Sepuluh Nopember ---
-------------- Indonesia ------------------

- mulai -

1. clone repo terbaru dari dashboardpy_motorcycle ini
$ git clone --branch master https://github.com/XRayrahman/dashboardpy_motorcycle.git

2. install pip untuk instalasi library python
$ sudo apt update
$ sudo apt upgrade
$ sudo apt install python3-pip python3-setuptools git-core python3-dev 
$ sudo apt install libsdl2-dev libsdl2-image-dev libsdl2-mixer-dev libsdl2-ttf-dev

3. install segala library yang digunakan, catatan : library kivy dan speedmeter harus diinstall secara manual dengan clone repo
$ cd path/to/dashboardpy_motorcycle
$ pip install -r requirements.txt

4. instalasi library speedmeter
$ cd ~
$ sudo chmod 777 /usr/local/lib/python3.9/dist-packages/
$ git clone https://github.com/kivy-garden/speedmeter.git
$ cd path/to/speedmeter
$ python3 setup.py install
$ cd ..

5.a. untuk penggunaan *tanpa* program estimasi, buat folder api dan file kosongan api-key.txt
$ cd path/to/dashboardpy_motorcycle
$ mkdir .key
$ touch .key/api-key.txt

5.b. untuk penggunaan *dengan* program estimasi, buat API token pada OpenRouteService API dan masukkan kedalam api-key.txt
$ nano .key/api-key.txt

6. program siap untuk dijalankan
$ python3 main.py

7.a. Agar program dapat berjalan otomatis saat booting, tambahkan ke script auto-start .desktop
$ cd path/to/dashboardpy_motorcycle
$ cp dashboard.sh ~
$ cd 
$ chmod +x dasboard.sh

7.b. Setelah itu .desktop dapat di setting melalui GUI atau terminal command
GUI : settings -> session and startup -> set command ke dashboard.sh yang telah dibuat 
atau
Term : $ cp dasboard.desktop ~/.config/autostart/

8. Lakukan reboot pada OS
$ sudo reboot

9. Untuk mempercepat proses booting, disable segala service yang tidak digunakan
$ sudo systemctl disable ssh \
  sudo systemctl disable chrony \
  sudo systemctl disable cups \
  sudo systemctl disable bluetooth \
  sudo systemctl disable blueman-mechanism \
  sudo systemctl disable xl2tpd

- ramlog == dari file /etc/default/orangepi-ramlog -> ENABLED=false
$ sudo nano /etc/default/orangepi-ramlog
- nobootsplash-time == dari file /etc/systemd/system/graphical.target.wants/bootsplash-hide-when-booted.service -> 'exec /bin/sleep 0'
$ sudo nano /etc/systemd/system/graphical.target.wants/bootsplash-hide-when-booted.service

10.a. Orangepi zero 2 user, edit nilai yang ada pada file /boot/orangepiEnv.txt seperti berikut

-- backup terlebih dahulu file orangepiEnv.txt --
$ cd /boot/
$ sudo cp orangepiEnv.txt orangepiEnv-copy.txt
-------------------------------------------------
/boot/orangepiEnv.txt -> verbosity=1
/boot/orangepiEnv.txt -> console=serial


10.b. Jangan lupa immute file orangepiEnv.txt untuk tidak berubah dan hapus file orangepi_first_run
$ sudo chattr +i /boot/orangepiEnv.txt
$ sudo rm orangepi_first_run.txt.template

> invert display dan sesuaikan resolusi layar jika diperlukan 
GUI : settings -> display

> jangan lupa ganti wallpaper desktop dengan file wallpaper yang telah disediakan
- dashboardpy_motorcycle/assets/wallpaper.png

> ubah settingan panel biar auto-hide
GUI : settings -> panel
    > "Display" tab :
    mode : vertical
    automatically hide the panel : always
    row size (pixels) : 20

    > "Appearance" tab :
    Dark Mode : switch on
    Style : Solid color
    Color : warna hitam ke-4

- selesai -

a. jika terjadi error path not found, sesuaikan kembali path yang ada pada script dasboard.sh dan dashboard.desktop
$ nano ~/dasboard.sh
$ nano ~/.local/share/applications/dashboard.desktop
